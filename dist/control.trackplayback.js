!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("leaflet"));else if("function"==typeof define&&define.amd)define(["leaflet"],e);else{var i="object"==typeof exports?e(require("leaflet")):e(t.L);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(self,(t=>(()=>{"use strict";var e={953:e=>{e.exports=t}},i={};function n(t){var a=i[t];if(void 0!==a)return a.exports;var o=i[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{n.r(a);var t=n(953),e=n.n(t);const i=e().Control.extend({options:{position:"topright",showOptions:!0,showInfo:!0,showSlider:!0,autoPlay:!1},initialize:function(t,i){e().Control.prototype.initialize.call(this,i),this.trackPlayBack=t,this.trackPlayBack.on("tick",this._tickCallback,this)},onAdd:function(t){return this._initContainer(),this._container},onRemove:function(t){this.trackPlayBack.dispose(),this.trackPlayBack.off("tick",this._tickCallback,this)},getTimeStrFromUnix:function(t,e="s"){t=parseInt(1e3*t);let i,n=new Date(t),a=n.getFullYear(),o=n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,r=n.getDate()<10?"0"+n.getDate():n.getDate(),s=n.getHours()<10?"0"+n.getHours():n.getHours(),c=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),l=n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds();return i="d"===e?a+"-"+o+"-"+r:"h"===e?a+"-"+o+"-"+r+" "+s:"m"===e?a+"-"+o+"-"+r+" "+s+":"+c:a+"-"+o+"-"+r+" "+s+":"+c+":"+l,i},_initContainer:function(){return this._container=e().DomUtil.create("div","leaflet-control-playback"),e().DomEvent.disableClickPropagation(this._container),this._optionsContainer=this._createContainer("optionsContainer",this._container),this._buttonContainer=this._createContainer("buttonContainer",this._container),this._infoContainer=this._createContainer("infoContainer",this._container),this._sliderContainer=this._createContainer("sliderContainer",this._container),this._pointCbx=this._createCheckbox("show trackPoint","show-trackpoint",this._optionsContainer,this._showTrackPoint),this._lineCbx=this._createCheckbox("show trackLine","show-trackLine",this._optionsContainer,this._showTrackLine),this._playBtn=this._createButton("play","btn-stop",this._buttonContainer,this._play),this._restartBtn=this._createButton("replay","btn-restart",this._buttonContainer,this._restart),this._slowSpeedBtn=this._createButton("slow","btn-slow",this._buttonContainer,this._slow),this._quickSpeedBtn=this._createButton("quick","btn-quick",this._buttonContainer,this._quick),this._closeBtn=this._createButton("close","btn-close",this._buttonContainer,this._close),this._infoStartTime=this._createInfo("startTime: ",this.getTimeStrFromUnix(this.trackPlayBack.getStartTime()),"info-start-time",this._infoContainer),this._infoEndTime=this._createInfo("endTime: ",this.getTimeStrFromUnix(this.trackPlayBack.getEndTime()),"info-end-time",this._infoContainer),this._infoCurTime=this._createInfo("curTime: ",this.getTimeStrFromUnix(this.trackPlayBack.getCurTime()),"info-cur-time",this._infoContainer),this._infoSpeedRatio=this._createInfo("speed: ",`X${this.trackPlayBack.getSpeed()}`,"info-speed-ratio",this._infoContainer),this._slider=this._createSlider("time-slider",this._sliderContainer,this._scrollchange),this._container},_createContainer:function(t,i){return e().DomUtil.create("div",t,i)},_createCheckbox:function(t,i,n,a){let o=e().DomUtil.create("div",i+" trackplayback-checkbox",n),r=e().DomUtil.create("input","trackplayback-input",o),s=`trackplayback-input-${e().Util.stamp(r)}`;r.setAttribute("type","checkbox"),r.setAttribute("id",s);let c=e().DomUtil.create("label","trackplayback-label",o);return c.setAttribute("for",s),c.innerHTML=t,e().DomEvent.on(r,"change",a,this),o},_createButton:function(t,i,n,a){let o=e().DomUtil.create("a",i,n);return o.href="#",o.title=t,o.setAttribute("role","button"),o.setAttribute("aria-label",t),e().DomEvent.disableClickPropagation(o),e().DomEvent.on(o,"click",a,this),o},_createInfo:function(t,i,n,a){let o=e().DomUtil.create("div","info-container",a);e().DomUtil.create("span","info-title",o).innerHTML=t;let r=e().DomUtil.create("span",n,o);return r.innerHTML=i,r},_createSlider:function(t,i,n){let a=e().DomUtil.create("input",t,i);return a.setAttribute("type","range"),a.setAttribute("min",this.trackPlayBack.getStartTime()),a.setAttribute("max",this.trackPlayBack.getEndTime()),a.setAttribute("value",this.trackPlayBack.getCurTime()),e().DomEvent.on(a,"click mousedown dbclick",e().DomEvent.stopPropagation).on(a,"click",e().DomEvent.preventDefault).on(a,"change",n,this).on(a,"mousemove",n,this),a},_showTrackPoint(t){t.target.checked?this.trackPlayBack.showTrackPoint():this.trackPlayBack.hideTrackPoint()},_showTrackLine(t){t.target.checked?this.trackPlayBack.showTrackLine():this.trackPlayBack.hideTrackLine()},_play:function(){e().DomUtil.hasClass(this._playBtn,"btn-stop")?(e().DomUtil.removeClass(this._playBtn,"btn-stop"),e().DomUtil.addClass(this._playBtn,"btn-start"),this._playBtn.setAttribute("title","stop"),this.trackPlayBack.start()):(e().DomUtil.removeClass(this._playBtn,"btn-start"),e().DomUtil.addClass(this._playBtn,"btn-stop"),this._playBtn.setAttribute("title","play"),this.trackPlayBack.stop())},_restart:function(){e().DomUtil.removeClass(this._playBtn,"btn-stop"),e().DomUtil.addClass(this._playBtn,"btn-start"),this._playBtn.setAttribute("title","stop"),this.trackPlayBack.rePlaying()},_slow:function(){this.trackPlayBack.slowSpeed();let t=this.trackPlayBack.getSpeed();this._infoSpeedRatio.innerHTML=`X${t}`},_quick:function(){this.trackPlayBack.quickSpeed();let t=this.trackPlayBack.getSpeed();this._infoSpeedRatio.innerHTML=`X${t}`},_close:function(){return e().DomUtil.remove(this._container),this.onRemove&&this.onRemove(this._map),this},_scrollchange:function(t){let e=Number(t.target.value);this.trackPlayBack.setCursor(e)},_tickCallback:function(t){let i=this.getTimeStrFromUnix(t.time);this._infoCurTime.innerHTML=i,this._slider.value=t.time,t.time>=this.trackPlayBack.getEndTime()&&(e().DomUtil.removeClass(this._playBtn,"btn-start"),e().DomUtil.addClass(this._playBtn,"btn-stop"),this._playBtn.setAttribute("title","play"),this.trackPlayBack.stop())}});e().TrackPlayBackControl=i,e().trackplaybackcontrol=function(t,e){return new i(t,e)}})(),a})()));
//# sourceMappingURL=control.trackplayback.js.map